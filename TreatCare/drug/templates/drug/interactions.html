{% extends 'base.html' %}

{% block title %}
Interações Medicamentosas | Medicamentos
{% endblock %}

{% block main_content %}
{% verbatim %}
<!-- Inside this verbatim, the {{}} expressions refers to AngularJS -->

<div class="container">
    <div ng-app="drugInteractions">
        <div class="col-sm-8" ng-controller="DrugController">
            <div class="box" >
                <div class="box-title">
                    <div class="row">
                        <div class="col-sm-6">
                            Insira um medicamento:
                            <input class="form-control" type="text" name="name" value="" placeholder="Pesquisar" autocomplete>
                        </div>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-sm-6" >
                            <div class="list-group-options row" ng-show="selectedDrugs.length">
                                <div class="col-xs-6 col-sm-6">
                                    <div class="list-group-options-title">Medicamentos</div>
                                </div>
                                <div class="col-xs-6 col-sm-6">
                                    <div class="talign-rigth">
                                        <span class="chip chip-deletable">
                                            <span class="chip-text">Limpar</span>
                                            <button ng-click="clearSelectedDrugs()" class="chip-action"><i class="material-icons">cancel</i></button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group list-group-site">
                                <div class="list-group-item" ng-repeat="drug in selectedDrugs">
                                    <selected-drug model="drug" remove="removeSelectedDrug" index="$index"></selected-drug>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="jumbotron loading-box" ng-if="loading">
                                <div class="loading-icon row">
                                    <i class="fa fa-spinner fa-spin fa-4x fast-spin"></i>
                                    <span class="sr-only">Loading...</span>
                                </div>
                                <div class="row">
                                    Procurando interações
                                </div>
                            </div>
                            <div ng-if="!loading">
                                <div ng-show="selectedDrugs.length > 1">
                                    <div class="talign-center">
                                        <ng-pluralize count="interactions.length"
                                                      when="{'0': 'Nenhuma interação encontrada.',
                                                             '1': '{} interação encontrada.',
                                                             'other': '{} interações encontradas.'}">
                                        </ng-pluralize>
                                    </div>
                                    <div class="list-group list-group-site">
                                        <div class="list-group-item" ng-repeat="interaction in interactions | orderBy: 'type'">
                                            <interaction model="interaction"></interaction>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endverbatim %}
{% endblock %}

{% block main_script %}
<!-- AngularJS -->
<script src="/static/libs/angular/angular.min.js" charset="utf-8"></script>
<!-- App -->
<script src="/static/drug/js/app.js" charset="utf-8"></script>
<!-- Controllers -->
<script src="/static/drug/js/controllers/DrugController.js" charset="utf-8"></script>
<!-- Directives -->
<script src="/static/drug/js/directives/autocomplete.js" charset="utf-8"></script>
<script src="/static/drug/js/directives/selectedDrug.js" charset="utf-8"></script>
<script src="/static/drug/js/directives/interaction.js" charset="utf-8"></script>
{% endblock %}
